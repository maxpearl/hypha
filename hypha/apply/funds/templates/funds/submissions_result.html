{% extends "base-apply.html" %}
{% load static %}
{% block title %}Submissions results{% endblock %}

{% block extra_css %}
{{ filter.form.media.css }}
{% endblock %}

{% block content %}
<div class="admin-bar">
    <div class="admin-bar__inner wrapper--search">
        {% block page_header %}
            <div>
                <h1 class="gamma heading heading--no-margin heading--bold">Submissions results</h1>
            </div>
        {% endblock %}
    </div>
</div>

<div class="wrapper wrapper--large wrapper--inner-space-medium">
    <h4 class="heading heading--normal">Filter submissions to calculate values</h4>
    {% include "funds/includes/table_filter_and_search.html" with filter_form=filter_form search_term=search_term use_search=True filter_action=filter_action use_batch_actions=False filter_classes="filters-open" %}
    <div class="grid">
        <div><strong>Number of submission:</strong> {{ count_values }}{% if not count_values == object_list.count %} ({{ object_list.count }}){% endif %}</div>
        <div><strong>Average value:</strong> ${{ average_value }}</div>
        <div><strong>Total value:</strong> ${{ total_value }}</div>
    </div>
    {% if not count_values == object_list.count %}
        <p>Some submissions lack values and are not included.</p>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
    {{ filter.form.media.js }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/url-search-params/1.1.0/url-search-params.js"></script>
    <script src="{% static 'js/apply/submission-filters.js' %}"></script>
{% endblock %}
